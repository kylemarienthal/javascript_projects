<!DOCTYPE html>
<html>
  <head>
    <title>Space Invaders 2</title>
    <link rel="stylesheet" href="style.css">
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <div id="background">
      <div id="hero"></div>
      <div class="enemy"></div>
      <div id="missiles"></div>
    </div>
    <script>
      var hero = {
        top: 700,
        left: 550
      };
      var missiles = [
        // {
        //   top: 700,
        //   left: 550
        // },
        // {
        //   top: 700,
        //   left: 550
        // }
      ];
      document.onkeydown = function(e){
        console.log(e.keyCode);
        if (e.keyCode === 37){
          console.log('LEFT');
          hero.left = hero.left - 10;
          moveHero();
        }
        else if (e.keyCode === 38){
          console.log('UP');
          hero.top = hero.top - 10;
          moveHero();
        }
        else if (e.keyCode === 39){
          console.log('RIGHT');
          hero.left = hero.left + 10;
          moveHero();
        }
        else if (e.keyCode === 40){
          console.log('DOWN');
          hero.top = hero.top + 10;
          moveHero();
        }
        else if (e.keyCode === 32){
          console.log('FIRE');
          missiles.push({
            left: hero.left + 15,
            top: hero.top
          })
          drawMissiles();
          console.log(missiles);
        }
      }
      function moveHero(){
        document.getElementById('hero').style.left = hero.left + 'px';
        document.getElementById('hero').style.top = hero.top + 'px';
      }

      function drawMissiles() {
        document.getElementById('missiles').innerHTML = "";
        for (var i = 0; i < missiles.length; i++) {
          document.getElementById('missiles').innerHTML += `<div class='missile' style='left:${missiles[i].left}px; top:${missiles[i].top}px;'></div>`;
        }
      }

      function moveMissiles() {
        for (var i = 0; i < missiles.length; i++) {
          missiles[i].top -= 5;
        }

      }

      function gameLoop(){
        setTimeout(gameLoop, 1000);
        // console.log('gameLoop is running');
        moveMissiles() //every time the game loops(1 sec = 1000 milisecs) the missile will move
        drawMissiles() //and then it will be drawn
      }
      gameLoop();

    </script>

  </body>
</html>
